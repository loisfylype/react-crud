{"ast":null,"code":"var _jsxFileName = \"D:\\\\backup\\\\CursoWeb\\\\react\\\\crud\\\\frontend\\\\src\\\\components\\\\user\\\\UserCrud.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport Main from '../template/Main';\nimport UserTable from '../template/UserTable';\nimport UserForm from '../template/UserForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst headerProps = {\n  icon: 'users',\n  title: 'Usu치rios',\n  subtitle: 'Cadastro de usu치rios: Incluir, Listar, Alterar e Excluir!'\n};\nconst baseUrl = 'http://localhost:3001/users';\nconst initialState = {\n  user: {\n    name: '',\n    email: ''\n  },\n  list: []\n};\nexport default class UserCrud extends Component {\n  constructor() {\n    super(...arguments);\n    this.funcs = {\n      updateField: this.updateField.bind(this)\n    };\n    this.state = { ...initialState\n    };\n  }\n\n  componentWillMount() {\n    axios(baseUrl).then(resp => {\n      this.setState({\n        list: resp.data\n      });\n    });\n  }\n\n  clear() {\n    this.setState({\n      user: initialState.user\n    });\n  }\n\n  save() {\n    const user = this.state.user;\n    const method = user.id ? 'put' : 'post';\n    const url = user.id ? `${baseUrl}/${user.id}` : baseUrl;\n    axios[method](url, user).then(resp => {\n      const list = this.getUpdatedList(resp.data);\n      this.setState({\n        user: initialState.user,\n        list\n      });\n    });\n  }\n\n  updateField(event) {\n    const user = { ...this.state.user\n    };\n    user[event.target.name] = event.target.value;\n    this.setState({\n      user\n    });\n  }\n\n  getUpdatedList(user) {\n    let add = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    const list = this.state.list.filter(u => u.id != user.id);\n    if (add) list.unshift(user);\n    return list;\n  }\n\n  load(user) {\n    this.setState({\n      user\n    });\n  }\n\n  remove(user) {\n    axios.delete(`${baseUrl}/${user.id}`).then(resp => {\n      const list = this.getUpdatedList(user, false);\n      this.setState({\n        list\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Main, { ...headerProps,\n      children: [/*#__PURE__*/_jsxDEV(UserForm, {\n        updateField: this.funcs.updateField,\n        save: this.save.bind(this),\n        clear: this.clear.bind(this),\n        user: this.state.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(UserTable, {\n        userList: this.state.list,\n        load: this.load.bind(this),\n        remove: this.remove.bind(this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/backup/CursoWeb/react/crud/frontend/src/components/user/UserCrud.jsx"],"names":["React","Component","axios","Main","UserTable","UserForm","headerProps","icon","title","subtitle","baseUrl","initialState","user","name","email","list","UserCrud","funcs","updateField","bind","state","componentWillMount","then","resp","setState","data","clear","save","method","id","url","getUpdatedList","event","target","value","add","filter","u","unshift","load","remove","delete","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nimport Main from '../template/Main'\r\nimport UserTable from '../template/UserTable'\r\nimport UserForm from '../template/UserForm'\r\n\r\nconst headerProps = {\r\n    icon: 'users',\r\n    title: 'Usu치rios',\r\n    subtitle: 'Cadastro de usu치rios: Incluir, Listar, Alterar e Excluir!'\r\n}\r\n\r\nconst baseUrl = 'http://localhost:3001/users'\r\nconst initialState = {\r\n    user: { name: '', email: '' },\r\n    list: []\r\n}\r\n\r\nexport default class UserCrud extends Component {\r\n    funcs = {updateField: this.updateField.bind(this)}\r\n    state = { ...initialState }\r\n\r\n    componentWillMount() {\r\n        axios(baseUrl).then(resp => {\r\n            this.setState({ list: resp.data })\r\n        })\r\n    }\r\n\r\n    clear() {\r\n        this.setState({ user: initialState.user })\r\n    }\r\n\r\n    save() {\r\n        const user = this.state.user\r\n        const method = user.id ? 'put' : 'post'\r\n        const url = user.id ? `${baseUrl}/${user.id}` : baseUrl\r\n        axios[method](url, user)\r\n            .then(resp => {\r\n                const list = this.getUpdatedList(resp.data)\r\n                this.setState({ user: initialState.user, list })\r\n            })\r\n    }\r\n\r\n    updateField(event) {\r\n        const user = { ...this.state.user }\r\n        user[event.target.name] = event.target.value\r\n        this.setState({ user })\r\n    }\r\n\r\n    getUpdatedList(user, add = true) {\r\n        const list = this.state.list.filter(u => u.id != user.id)\r\n        if (add) list.unshift(user)\r\n        return list\r\n    }\r\n\r\n    load(user) {\r\n        this.setState({ user })\r\n    }\r\n\r\n    remove(user) {\r\n        axios.delete(`${baseUrl}/${user.id}`).then(resp => {\r\n            const list = this.getUpdatedList(user, false)\r\n            this.setState({ list })\r\n        })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Main {...headerProps}>\r\n                <UserForm updateField={this.funcs.updateField} save={this.save.bind(this)} clear={this.clear.bind(this)} user={this.state.user}/>\r\n                <UserTable userList={this.state.list} load={this.load.bind(this)} remove={this.remove.bind(this)}/>\r\n            </Main>\r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}